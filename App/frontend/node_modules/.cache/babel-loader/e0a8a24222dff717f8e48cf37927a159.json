{"ast":null,"code":"var _jsxFileName = \"/Users/m.asyam/Desktop/AcademicAxis/App/frontend/src/view/teacher/manageTest.js\";\nimport React from \"react\";\nimport Dropdown from \"react-dropdown\";\nimport { getStudentMarkDetails, createNewTest, getTestDetails, checkResultID, uploadResult, deleteATest, updateResult, updateATest, getAvgMark } from \"../../api/TeacherAPI\";\nimport { CSVReader } from \"react-papaparse\";\nimport \"../../App.css\";\nimport ManageTestPopup from \"./ManageTestPopup\";\nimport ManageStudentTestPopup from \"./ManageStudentTestPopup\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst buttonRef = /*#__PURE__*/React.createRef();\nvar redirectloginpath = \"/teacherpanel\";\nexport default class manageTest extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleOpenDialog = e => {\n      if (buttonRef.current) {\n        buttonRef.current.open(e);\n      }\n    };\n\n    this.handleOnRemoveFile = data => {\n      var that = this;\n      this.setState({\n        studentMarkData: data ? data : []\n      }, () => {\n        console.log(that.state.studentMarkData);\n      });\n    };\n\n    this.handleRemoveFile = e => {\n      if (buttonRef.current) {\n        buttonRef.current.removeFile(e);\n      }\n    };\n\n    this.handleOnFileLoad = data => {\n      var that = this;\n      var obj = [];\n\n      if (data) {\n        data.forEach((dt, idx) => {\n          if (idx !== 0) obj.push({\n            uid: dt.data[0],\n            grade: dt.data[1],\n            sid: that.state.sid,\n            tid: that.state.selectedTest,\n            rid: \"\"\n          });\n        });\n      }\n\n      this.setState({\n        studentMarkData: obj\n      }, () => {\n        console.log(that.state.studentMarkData);\n      });\n    };\n\n    this.handleOnError = (err, file, inputElem, reason) => {};\n\n    this.state = {\n      token: this.props.location.state.token,\n      uid: this.props.location.state.uid,\n      subjectname: this.props.location.state.info.subjectname,\n      sid: this.props.location.state.info.sid,\n      cid: this.props.location.state.info.cid,\n      classname: this.props.location.state.info.classname,\n      testDetailsList: this.props.location.state.testList,\n      testList: [],\n      studentList: [],\n      selectedTest: this.props.location.state.selectedTest,\n      studentMarkData: [],\n      t_firstn: this.props.location.state.t_firstn,\n      t_lastn: this.props.location.state.t_lastn,\n      showTestPopup: false,\n      showStudentGradePopup: false,\n      showPopUp: false,\n      popupHeaderText: '',\n      popupBtnText: '',\n      studentData: '',\n      testResult: [],\n      tid: \"\",\n      testname: \"\",\n      testdate: \"\",\n      isAvgMarks: false\n    };\n    this.getAllTests = this.getAllTests.bind(this);\n    this.loadFillData = this.loadFillData.bind(this);\n    this.onTestChange = this.onTestChange.bind(this);\n    this.gotoBack = this.gotoBack.bind(this);\n    this.getIndex = this.getIndex.bind(this);\n    this.loadStudentList = this.loadStudentList.bind(this);\n    this.toggleNewTestPopup = this.toggleNewTestPopup.bind(this);\n    this.toggleStudentGradePopup = this.toggleStudentGradePopup.bind(this);\n    this.openStudentTestGradeUpdatePopup = this.openStudentTestGradeUpdatePopup.bind(this);\n    this.openNewTestPopup = this.openNewTestPopup.bind(this);\n    this.openUpdatePopup = this.openUpdatePopup.bind(this);\n    this.closeStudentGradePopup = this.closeStudentGradePopup.bind(this);\n    this.closeTestPopup = this.closeTestPopup.bind(this);\n    this.uploadTestResult = this.uploadTestResult.bind(this);\n    this.updateInfo = this.updateInfo.bind(this);\n    this.addTest = this.addTest.bind(this);\n    this.setID = this.setID.bind(this);\n    this.deleteInfo = this.deleteInfo.bind(this);\n    this.updateTest = this.updateTest.bind(this);\n    this.showAvgMarks = this.showAvgMarks.bind(this);\n  }\n\n  showAvgMarks() {\n    var that = this;\n    getAvgMark(that.state.sid, that.state.cid, \"Token \" + that.state.token).then(response => {\n      that.setState({\n        isAvgMarks: true,\n        studentList: response.data,\n        selectedTest: \"\"\n      });\n    });\n  }\n\n  setID() {\n    return \"RES\" + Date.now();\n  }\n\n  uploadTestResult() {\n    var that = this;\n    var countRow = 0;\n\n    if (this.state.studentMarkData.length) {\n      this.state.studentMarkData.forEach((stdData, idx) => {\n        checkResultID(stdData, \"Tokenn \" + that.state.token).then(response => {\n          if (response.res.length) {\n            stdData.rid = response.res[0].resid;\n          } else {\n            stdData.rid = that.setID() + idx;\n          }\n\n          uploadResult(stdData, \"Token \" + that.state.token).then(response => {\n            if (response.status === \"SUCCESS\") {\n              that.loadStudentList();\n            }\n          });\n        });\n      });\n    } else {\n      alert(\"Please select a CSV file.\");\n    }\n  }\n\n  openUpdatePopup(data) {\n    var that = this;\n    if (this.state.selectedTest) that.setState({\n      popupHeaderText: \"Update selected Test for \" + that.state.classname + \" - \" + that.state.subjectname,\n      popupBtnText: \"Update\"\n    }, () => {\n      that.toggleNewTestPopup();\n    });else {\n      alert(\"Please select a test\");\n    }\n  }\n\n  toggleNewTestPopup() {\n    this.setState({\n      showPopUp: !this.state.showPopUp\n    });\n  }\n\n  closeTestPopup() {\n    var that = this;\n    that.setState({\n      popupHeaderText: \"\",\n      popupBtnText: \"\"\n    }, () => {\n      that.toggleNewTestPopup();\n    });\n  }\n\n  openNewTestPopup() {\n    var that = this;\n    that.setState({\n      popupHeaderText: \"Add A new Test for \" + that.state.classname + \" - \" + that.state.subjectname,\n      popupBtnText: \"Add\"\n    }, () => {\n      that.toggleNewTestPopup();\n    });\n  }\n\n  toggleStudentGradePopup() {\n    this.setState({\n      showStudentGradePopup: !this.state.showStudentGradePopup\n    });\n  }\n\n  closeStudentGradePopup() {\n    var that = this;\n    this.setState({\n      popupHeaderText: '',\n      popupBtnText: \"\",\n      studentData: ''\n    }, () => {\n      that.toggleStudentGradePopup();\n    });\n  }\n\n  openStudentTestGradeUpdatePopup(data) {\n    var that = this;\n    that.setState({\n      popupHeaderText: data.name + \"'s test and grade update\",\n      popupBtnText: \"Update\",\n      studentMarkData: data\n    }, () => {\n      that.toggleStudentGradePopup();\n    });\n  }\n\n  loadStudentList() {\n    var that = this;\n    getStudentMarkDetails(that.state.selectedTest, that.state.sid, that.state.cid, that.state.token).then(response => {\n      if (response) if (response.data) {\n        that.setState({\n          studentList: response.data\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    this.getAllTests();\n    this.loadStudentList();\n  }\n\n  render() {\n    var that = this;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fill-window\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"main-title-area\",\n          style: {\n            paddingBottom: '20px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              width: \"30\",\n              height: \"30\",\n              margin: \"10px\",\n              fill: \"currentColor\",\n              class: \"bi bi-person-badge\",\n              viewBox: \"0 0 16 16\",\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M6.5 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zM11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M4.5 0A2.5 2.5 0 0 0 2 2.5V14a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2.5A2.5 2.5 0 0 0 11.5 0h-7zM3 2.5A1.5 1.5 0 0 1 4.5 1h7A1.5 1.5 0 0 1 13 2.5v10.795a4.2 4.2 0 0 0-.776-.492C11.392 12.387 10.063 12 8 12s-3.392.387-4.224.803a4.2 4.2 0 0 0-.776.492V2.5z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this), \"\\xA0 Teacher View\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              textAlign: 'right',\n              marginTop: '10px'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                width: \"20\",\n                height: \"20\",\n                fill: \"currentColor\",\n                class: \"bi bi-person-circle\",\n                viewBox: \"0 0 16 16\",\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  \"fill-rule\": \"evenodd\",\n                  d: \"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 19\n              }, this), \"\\xA0 \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: [this.state.t_firstn, \" \", this.state.t_lastn]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 26\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tab-area\",\n          style: {\n            backgroundColor: '#f9fbfd'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"subtitle-area\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-text\",\n              onClick: this.gotoBack,\n              children: \" < Back\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                color: '#8c8c8c',\n                textAlign: 'center',\n                margin: '20px auto'\n              },\n              children: [\"Test Management for \", that.state.classname, \" - \", that.state.subjectname]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"box-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selection-area\",\n              style: {\n                display: 'flex',\n                flexDirection: 'column',\n                justifyContent: 'space-between'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"dropDownItem card row justify-content-center align-items-center\",\n                  style: {\n                    height: '200px'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: /*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"Select a test\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 290,\n                      columnNumber: 24\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 290,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n                    classname: \"style.dropDown\",\n                    value: that.state.testList[this.getIndex(this.state.testList, this.state.selectedTest)],\n                    options: that.state.testList,\n                    onChange: this.onTestChange,\n                    placeholder: \"Select a test\",\n                    placeholderClassName: \"myPlaceholderClassName\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 291,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 303,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-primary\",\n                    onClick: () => this.showAvgMarks(that.state.selectedTest),\n                    children: \"View Avg. Mark\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 304,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"SecondItem card row justify-content-center align-items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: /*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"Settings: Test\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 312,\n                      columnNumber: 24\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 312,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-success\",\n                    onClick: this.openNewTestPopup,\n                    children: \" Add\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 313,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      width: '100%',\n                      marginTop: '10px'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn\",\n                      style: {\n                        width: '26%',\n                        backgroundColor: '#a3bff0',\n                        borderColor: '#a3bff0'\n                      },\n                      onClick: () => this.openUpdatePopup(that.state.classinfo),\n                      children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                        xmlns: \"http://www.w3.org/2000/svg\",\n                        width: \"20\",\n                        height: \"20\",\n                        fill: \"currentColor\",\n                        class: \"bi bi-pencil-square\",\n                        viewBox: \"0 0 16 16\",\n                        children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                          d: \"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 320,\n                          columnNumber: 25\n                        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                          \"fill-rule\": \"evenodd\",\n                          d: \"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 321,\n                          columnNumber: 25\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 319,\n                        columnNumber: 23\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 315,\n                      columnNumber: 21\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn\",\n                      style: {\n                        width: '26%',\n                        marginLeft: '10px',\n                        backgroundColor: '#f0a3a7',\n                        borderColor: '#f0a3a7'\n                      },\n                      onClick: () => this.deleteInfo(that.state.selectedTest),\n                      children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                        xmlns: \"http://www.w3.org/2000/svg\",\n                        width: \"20\",\n                        height: \"20\",\n                        fill: \"currentColor\",\n                        class: \"bi bi-trash\",\n                        viewBox: \"0 0 16 16\",\n                        children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                          d: \"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 329,\n                          columnNumber: 25\n                        }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                          \"fill-rule\": \"evenodd\",\n                          d: \"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 330,\n                          columnNumber: 25\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 328,\n                        columnNumber: 23\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 324,\n                      columnNumber: 21\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 314,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 311,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"SecondItem card row justify-content-center align-items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: /*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"Upload a CSV file\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 336,\n                      columnNumber: 24\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 336,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"upload-area\",\n                    children: /*#__PURE__*/_jsxDEV(CSVReader, {\n                      noClick: true,\n                      noDrag: true,\n                      ref: buttonRef,\n                      onFileLoad: this.handleOnFileLoad,\n                      onError: this.handleOnError,\n                      onRemoveFile: this.handleOnRemoveFile,\n                      children: ({\n                        file\n                      }) => /*#__PURE__*/_jsxDEV(\"aside\", {\n                        style: {},\n                        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"btn\",\n                          id: \"browse\",\n                          type: \"button\",\n                          onClick: this.handleOpenDialog,\n                          children: \"Browse\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 350,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          style: {},\n                          children: file && file.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 353,\n                          columnNumber: 33\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"btn\",\n                          id: \"delete\",\n                          type: \"button\",\n                          onClick: this.handleRemoveFile,\n                          children: \"Remove\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 354,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 347,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 338,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 337,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-primary\",\n                    onClick: this.uploadTestResult,\n                    children: \"Upload\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 362,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 335,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"table-box\",\n              children: that.state.studentList.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ag-theme-alpine data-table\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"table-scroll\",\n                  children: /*#__PURE__*/_jsxDEV(\"table\", {\n                    className: \"table table-hover\",\n                    children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                      className: \"thead-light\",\n                      children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                          scope: \"col\",\n                          children: \"Student Name\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 375,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          scope: \"col\",\n                          children: that.state.isAvgMarks ? \"Avg.Marks\" : \"Grade\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 376,\n                          columnNumber: 29\n                        }, this), that.state.isAvgMarks ? \"\" : /*#__PURE__*/_jsxDEV(\"th\", {\n                          scope: \"col\",\n                          children: \"Action\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 377,\n                          columnNumber: 59\n                        }, this)]\n                      }, \"user_key1\", true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 374,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 373,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                      children: this.loadFillData()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 380,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 372,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 371,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"No student is in this class and test\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 17\n            }, this), that.state.showPopUp ? /*#__PURE__*/_jsxDEV(ManageTestPopup, {\n              testList: that.state.testList,\n              selectedTest: that.state.selectedTest,\n              popupHeaderText: that.state.popupHeaderText,\n              testDetailsList: that.state.testDetailsList,\n              sid: that.state.sid,\n              popupBtnText: that.state.popupBtnText,\n              updateTest: that.updateTest,\n              addTest: that.addTest,\n              closePopup: that.closeTestPopup\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 21\n            }, this) : null, that.state.showStudentGradePopup ? /*#__PURE__*/_jsxDEV(ManageStudentTestPopup, {\n              testList: that.state.testList,\n              selectedTest: that.state.selectedTest,\n              popupHeaderText: that.state.popupHeaderText,\n              studentData: that.state.studentData,\n              popupBtnText: that.state.popupBtnText,\n              studentMarkData: that.state.studentMarkData //        addUser={that.addUser}\n              ,\n              updateInfo: that.updateInfo,\n              closePopup: that.closeStudentGradePopup\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 21\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 9\n    }, this);\n  }\n\n  getIndex(arr, testVal) {\n    return arr.findIndex(obj => obj.value === testVal);\n  }\n\n  gotoBack() {\n    this.props.history.push({\n      pathname: redirectloginpath,\n      state: {\n        token: this.state.token,\n        uid: this.state.uid,\n        t_firstn: this.state.t_firstn,\n        t_lastn: this.state.t_lastn\n      }\n    });\n  }\n\n  onTestChange(data) {\n    var that = this;\n    this.setState({\n      selectedTest: data.value,\n      isAvgMarks: false\n    }, () => {\n      that.loadStudentList();\n    });\n  }\n\n  loadFillData() {\n    if (this.state.studentList.length) {\n      return this.state.studentList.map((data, idx) => {\n        return /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: data.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: this.state.isAvgMarks ? data.avgGrade : data.marks\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 15\n          }, this), this.state.isAvgMarks ? \"\" : /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn p-0\",\n              onClick: () => this.openStudentTestGradeUpdatePopup(data),\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                width: \"20\",\n                height: \"20\",\n                fill: \"currentColor\",\n                class: \"bi bi-pencil-square\",\n                viewBox: \"0 0 16 16\",\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 454,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  \"fill-rule\": \"evenodd\",\n                  d: \"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 455,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 26\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 18\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 45\n          }, this)]\n        }, data.username + idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 13\n        }, this);\n      });\n    }\n  }\n\n  getAllTests() {\n    var tempList = [];\n    var that = this;\n    that.state.testDetailsList.forEach(info => {\n      var obj = {\n        value: info.tid,\n        label: info.testname\n      };\n      tempList.push(obj);\n    });\n    that.setState({\n      testList: tempList\n    }, () => {});\n  }\n\n  addTest(data) {\n    var that = this;\n    console.log(that.state.token);\n    createNewTest(data, \"Token \" + that.state.token).then(data => {\n      if (data.status === \"SUCCESS\") {\n        that.toggleNewTestPopup();\n        that.setState({\n          testList: []\n        }, () => {\n          getTestDetails(that.state.sid, \"Token \" + that.props.token).then(response => {\n            that.setState({\n              testDetailsList: response.data\n            }, () => {\n              that.getAllTests();\n            });\n          });\n        });\n      } else {// alert(\"Error!!\");\n      }\n    });\n  }\n\n  updateTest(data) {\n    console.log(data);\n    var that = this; //console.log(data)\n\n    updateATest(data, \"Token \" + that.state.token).then(response => {\n      if (response.status === \"SUCCESS\") {\n        that.toggleNewTestPopup();\n        that.setState({\n          testList: []\n        }, () => {\n          getTestDetails(that.state.sid, \"Token \" + that.props.token).then(response => {\n            that.setState({\n              testDetailsList: response.data\n            }, () => {\n              that.getAllTests();\n            });\n          });\n        });\n      } else {\n        alert(\"Error!!\");\n      }\n    });\n  }\n\n  deleteInfo(data) {\n    var that = this;\n    console.log(data);\n\n    if (this.state.selectedTest) {\n      if (!window.confirm(\"Do you really want to delete the class?\")) return;\n      deleteATest(data, \"Token \" + that.state.token).then(data => {\n        alert(data.message);\n\n        if (data.status === \"SUCCESS\") {\n          that.setState({\n            testList: []\n          }, () => {\n            getTestDetails(that.state.sid, \"Token \" + that.props.token).then(response => {\n              that.setState({\n                testDetailsList: response.data,\n                selectedTest: null\n              }, () => {\n                that.getAllTests();\n              });\n            });\n          });\n        } else {\n          alert(\"Error!!\");\n        }\n      });\n    } else {\n      alert(\"Please select a test to delete\");\n    }\n  }\n\n  updateInfo(data) {\n    var that = this;\n    var result = {\n      rid: data.resid,\n      sid: this.state.sid,\n      tid: this.state.selectedTest,\n      uid: data.uid,\n      grade: data.marks\n    };\n    updateResult(result, that.state.token).then(response => {\n      console.log(response);\n\n      if (response.status === \"SUCCESS\") {\n        that.toggleStudentGradePopup();\n        that.setState({}, () => {\n          that.loadStudentList();\n        });\n      } else {\n        alert(response.message);\n      }\n    });\n  }\n\n}","map":{"version":3,"sources":["/Users/m.asyam/Desktop/AcademicAxis/App/frontend/src/view/teacher/manageTest.js"],"names":["React","Dropdown","getStudentMarkDetails","createNewTest","getTestDetails","checkResultID","uploadResult","deleteATest","updateResult","updateATest","getAvgMark","CSVReader","ManageTestPopup","ManageStudentTestPopup","buttonRef","createRef","redirectloginpath","manageTest","Component","constructor","props","handleOpenDialog","e","current","open","handleOnRemoveFile","data","that","setState","studentMarkData","console","log","state","handleRemoveFile","removeFile","handleOnFileLoad","obj","forEach","dt","idx","push","uid","grade","sid","tid","selectedTest","rid","handleOnError","err","file","inputElem","reason","token","location","subjectname","info","cid","classname","testDetailsList","testList","studentList","t_firstn","t_lastn","showTestPopup","showStudentGradePopup","showPopUp","popupHeaderText","popupBtnText","studentData","testResult","testname","testdate","isAvgMarks","getAllTests","bind","loadFillData","onTestChange","gotoBack","getIndex","loadStudentList","toggleNewTestPopup","toggleStudentGradePopup","openStudentTestGradeUpdatePopup","openNewTestPopup","openUpdatePopup","closeStudentGradePopup","closeTestPopup","uploadTestResult","updateInfo","addTest","setID","deleteInfo","updateTest","showAvgMarks","then","response","Date","now","countRow","length","stdData","res","resid","status","alert","name","componentDidMount","render","paddingBottom","textAlign","marginTop","backgroundColor","color","margin","display","flexDirection","justifyContent","height","width","borderColor","classinfo","marginLeft","arr","testVal","findIndex","value","history","pathname","map","avgGrade","marks","username","tempList","label","window","confirm","message","result"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nimport Dropdown from \"react-dropdown\";\nimport {\n  getStudentMarkDetails,\n  createNewTest,\n  getTestDetails,\n  checkResultID,\n  uploadResult,\n  deleteATest,\n  updateResult,\n  updateATest,\n  getAvgMark\n} from \"../../api/TeacherAPI\";\n\nimport {CSVReader} from \"react-papaparse\";\n\nimport \"../../App.css\";\nimport ManageTestPopup from \"./ManageTestPopup\";\nimport ManageStudentTestPopup from \"./ManageStudentTestPopup\";\n\nconst buttonRef = React.createRef();\n\nvar redirectloginpath = \"/teacherpanel\"\n\nexport default class manageTest extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: this.props.location.state.token,\n      uid: this.props.location.state.uid,\n      subjectname: this.props.location.state.info.subjectname,\n      sid: this.props.location.state.info.sid,\n      cid: this.props.location.state.info.cid,\n      classname: this.props.location.state.info.classname,\n      testDetailsList: this.props.location.state.testList,\n      testList: [],\n      studentList: [],\n      selectedTest: this.props.location.state.selectedTest,\n      studentMarkData: [],\n      t_firstn:this.props.location.state.t_firstn,\n      t_lastn:this.props.location.state.t_lastn,\n\n      showTestPopup: false,\n      showStudentGradePopup: false,\n      showPopUp: false,\n\n      popupHeaderText: '',\n      popupBtnText: '',\n      studentData: '',\n\n      testResult: [],\n      tid: \"\",\n      testname: \"\",\n      testdate: \"\",\n      isAvgMarks: false,\n    };\n\n    this.getAllTests = this.getAllTests.bind(this);\n    this.loadFillData = this.loadFillData.bind(this);\n    this.onTestChange = this.onTestChange.bind(this);\n    this.gotoBack = this.gotoBack.bind(this);\n    this.getIndex = this.getIndex.bind(this);\n    this.loadStudentList = this.loadStudentList.bind(this);\n\n    this.toggleNewTestPopup = this.toggleNewTestPopup.bind(this);\n    this.toggleStudentGradePopup = this.toggleStudentGradePopup.bind(this);\n\n    this.openStudentTestGradeUpdatePopup =\n        this.openStudentTestGradeUpdatePopup.bind(this);\n    this.openNewTestPopup = this.openNewTestPopup.bind(this);\n    this.openUpdatePopup = this.openUpdatePopup.bind(this);\n\n    this.closeStudentGradePopup = this.closeStudentGradePopup.bind(this);\n    this.closeTestPopup = this.closeTestPopup.bind(this);\n    this.uploadTestResult = this.uploadTestResult.bind(this);\n    this.updateInfo = this.updateInfo.bind(this);\n\n    this.addTest = this.addTest.bind(this);\n    this.setID = this.setID.bind(this);\n    this.deleteInfo = this.deleteInfo.bind(this);\n    this.updateTest = this.updateTest.bind(this);\n    this.showAvgMarks = this.showAvgMarks.bind(this);\n  }\n\n  showAvgMarks() {\n    var that = this;\n    getAvgMark(that.state.sid, that.state.cid, \"Token \"+ that.state.token).then(response => {\n      that.setState({isAvgMarks: true, studentList: response.data, selectedTest: \"\"})\n    })\n  }\n\n  setID() {\n    return \"RES\" + Date.now();\n  }\n\n  uploadTestResult() {\n    var that = this;\n    var countRow = 0;\n    if (this.state.studentMarkData.length) {\n      this.state.studentMarkData.forEach((stdData, idx) => {\n        checkResultID(stdData, \"Tokenn \" + that.state.token).then(\n            (response) => {\n              if (response.res.length) {\n                stdData.rid = response.res[0].resid;\n              } else {\n                stdData.rid = that.setID() + idx;\n              }\n\n              uploadResult(stdData, \"Token \" + that.state.token).then(\n                  (response) => {\n                    if (response.status === \"SUCCESS\") {\n                      that.loadStudentList();\n                    }\n                  }\n              );\n            }\n        );\n      });\n    } else {\n      alert(\"Please select a CSV file.\");\n    }\n  }\n\n  openUpdatePopup(data) {\n    var that = this;\n    if (this.state.selectedTest)\n      that.setState(\n          {\n            popupHeaderText:\n                \"Update selected Test for \" +\n                that.state.classname +\n                \" - \" +\n                that.state.subjectname,\n            popupBtnText: \"Update\",\n          },\n          () => {\n            that.toggleNewTestPopup();\n          }\n      );\n    else {\n      alert(\"Please select a test\")\n    }\n  }\n\n  toggleNewTestPopup() {\n    this.setState({showPopUp: !this.state.showPopUp});\n  }\n\n  closeTestPopup() {\n    var that = this;\n    that.setState(\n        {\n          popupHeaderText: \"\",\n          popupBtnText: \"\",\n        },\n        () => {\n          that.toggleNewTestPopup();\n        }\n    );\n  }\n\n  openNewTestPopup() {\n    var that = this;\n    that.setState({\n      popupHeaderText: \"Add A new Test for \" + that.state.classname + \" - \" + that.state.subjectname,\n      popupBtnText: \"Add\",\n    }, () => {\n      that.toggleNewTestPopup();\n    })\n  }\n\n  toggleStudentGradePopup() {\n    this.setState({showStudentGradePopup: !this.state.showStudentGradePopup})\n  }\n\n  closeStudentGradePopup() {\n    var that = this;\n    this.setState({\n          popupHeaderText: '',\n          popupBtnText: \"\",\n          studentData: '',\n        },\n        () => {\n          that.toggleStudentGradePopup();\n        })\n  }\n\n  openStudentTestGradeUpdatePopup(data) {\n    var that = this;\n    that.setState({\n      popupHeaderText: data.name + \"'s test and grade update\",\n      popupBtnText: \"Update\",\n      studentMarkData: data,\n\n    }, () => {\n      that.toggleStudentGradePopup();\n    })\n  }\n\n  loadStudentList() {\n    var that = this;\n    getStudentMarkDetails(that.state.selectedTest, that.state.sid, that.state.cid , that.state.token).then(response => {\n      if (response)\n        if (response.data) {\n          that.setState({studentList: response.data})\n        }\n    })\n  }\n\n  handleOpenDialog = (e) => {\n    if (buttonRef.current) {\n      buttonRef.current.open(e);\n    }\n  };\n\n  handleOnRemoveFile = (data) => {\n    var that = this;\n    this.setState({studentMarkData: data ? data : []}, () => {\n      console.log(that.state.studentMarkData);\n    });\n  };\n\n  handleRemoveFile = (e) => {\n    if (buttonRef.current) {\n      buttonRef.current.removeFile(e);\n    }\n  };\n\n  handleOnFileLoad = (data) => {\n    var that = this;\n    var obj = [];\n    if (data) {\n      data.forEach((dt, idx) => {\n        if (idx !== 0)\n          obj.push({\n            uid: dt.data[0],\n            grade: dt.data[1],\n            sid: that.state.sid,\n            tid: that.state.selectedTest,\n            rid: \"\",\n          });\n      });\n    }\n    this.setState({studentMarkData: obj}, () => {\n      console.log(that.state.studentMarkData);\n    });\n  };\n\n  handleOnError = (err, file, inputElem, reason) => {\n  };\n\n  componentDidMount() {\n    this.getAllTests();\n    this.loadStudentList();\n  }\n\n  render() {\n    var that = this;\n    return (\n        <div>\n          <div className=\"fill-window\">\n            <div className='main-title-area' style={{paddingBottom: '20px'}}>\n            <h3>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"30\" height=\"30\" margin=\"10px\" fill=\"currentColor\" class=\"bi bi-person-badge\" viewBox=\"0 0 16 16\">\n                <path d=\"M6.5 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zM11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0z\"></path>\n                <path d=\"M4.5 0A2.5 2.5 0 0 0 2 2.5V14a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2.5A2.5 2.5 0 0 0 11.5 0h-7zM3 2.5A1.5 1.5 0 0 1 4.5 1h7A1.5 1.5 0 0 1 13 2.5v10.795a4.2 4.2 0 0 0-.776-.492C11.392 12.387 10.063 12 8 12s-3.392.387-4.224.803a4.2 4.2 0 0 0-.776.492V2.5z\"></path>\n              </svg>\n              &nbsp; Teacher View</h3>\n              <div style={{textAlign:'right', marginTop:'10px'}}>\n                <h6> \n                  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" class=\"bi bi-person-circle\" viewBox=\"0 0 16 16\">\n                    <path d=\"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z\"></path>\n                    <path fill-rule=\"evenodd\" d=\"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z\"></path>\n                  </svg>\n                  &nbsp; <b>{this.state.t_firstn} {this.state.t_lastn}</b></h6>\n              </div>\n            </div>\n            <div className='tab-area' style={{backgroundColor:'#f9fbfd'}}>\n              <div className=\"subtitle-area\">\n                <button className=\"btn btn-text\" onClick={this.gotoBack}>\t&#60; Back</button>\n                <h4 style={{color: '#8c8c8c', textAlign: 'center', margin: '20px auto'}}>Test Management\n                  for {that.state.classname} - {that.state.subjectname}</h4>\n              </div>\n              <div className=\"box-container\">\n                <div className='selection-area'\n                     style={{display: 'flex', flexDirection: 'column', justifyContent: 'space-between'}}>\n                  <div>\n                  <div className=\"dropDownItem card row justify-content-center align-items-center\" style={{height:'200px'}}>\n                    <p><b>Select a test</b></p>\n                    <Dropdown\n                        classname=\"style.dropDown\"\n                        value={\n                          that.state.testList[\n                              this.getIndex(this.state.testList, this.state.selectedTest)\n                              ]\n                        }\n                        options={that.state.testList}\n                        onChange={this.onTestChange}\n                        placeholder=\"Select a test\"\n                        placeholderClassName=\"myPlaceholderClassName\"\n                    />\n                    <br/>\n                    <button\n                        className=\"btn btn-primary\"\n                        onClick={() => this.showAvgMarks(that.state.selectedTest)}\n                    >\n                      View Avg. Mark\n                    </button>\n                  </div>\n                    <div className=\"SecondItem card row justify-content-center align-items-center\">\n                    <p><b>Settings: Test</b></p>\n                    <button className=\"btn btn-success\" onClick={this.openNewTestPopup}> Add</button>\n                    <div style={{width:'100%', marginTop:'10px'}}>\n                    <button\n                        className=\"btn\" style={{width:'26%', backgroundColor:'#a3bff0',borderColor:'#a3bff0'}}\n                        onClick={() => this.openUpdatePopup(that.state.classinfo)}\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" class=\"bi bi-pencil-square\" viewBox=\"0 0 16 16\">\n                        <path d=\"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"></path>\n                        <path fill-rule=\"evenodd\" d=\"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z\"></path>\n                      </svg>\n                    </button>\n                    <button\n                        className=\"btn\" style={{width:'26%', marginLeft:'10px', backgroundColor:'#f0a3a7',borderColor:'#f0a3a7'}} \n                        onClick={() => this.deleteInfo(that.state.selectedTest)}\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" class=\"bi bi-trash\" viewBox=\"0 0 16 16\">\n                        <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"></path>\n                        <path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"></path>\n                      </svg>\n                    </button>\n                    </div>\n                    </div>\n                    <div className=\"SecondItem card row justify-content-center align-items-center\">\n                    <p><b>Upload a CSV file</b></p>\n                      <div className=\"upload-area\">\n                        <CSVReader\n                            noClick\n                            noDrag\n                            ref={buttonRef}\n                            onFileLoad={this.handleOnFileLoad}\n                            onError={this.handleOnError}\n                            onRemoveFile={this.handleOnRemoveFile}\n                        >\n                          {({file}) => (\n                              <aside\n                                  style={{}}\n                              >\n                                <button className=\"btn\" id=\"browse\" type=\"button\" onClick={this.handleOpenDialog}> \n                                Browse\n                                </button>\n                                <div style={{}}>{file && file.name}</div>\n                                <button className=\"btn\" id=\"delete\" type=\"button\" onClick={this.handleRemoveFile}>\n                                Remove\n                                </button>\n                              </aside>\n                          )}\n                        </CSVReader>\n                        \n                      </div>\n                      <button className=\"btn btn-primary\" onClick={this.uploadTestResult}>\n                          Upload\n                      </button>\n                  </div>\n                  </div>\n                </div>\n                <div className=\"table-box\">\n                {that.state.studentList.length ? (\n                    <div className=\"ag-theme-alpine data-table\">\n                      <div className=\"table-scroll\">\n                        <table className=\"table table-hover\">\n                          <thead className=\"thead-light\">\n                          <tr key={\"user_key1\"}>\n                            <th scope=\"col\">Student Name</th>\n                            <th scope=\"col\">{that.state.isAvgMarks ? \"Avg.Marks\" : \"Grade\"}</th>\n                            {that.state.isAvgMarks ? \"\" : <th scope=\"col\">Action</th>}\n                          </tr>\n                          </thead>\n                          <tbody>{this.loadFillData()}</tbody>\n                        </table>\n                      </div>\n                    </div>\n                ) : (\n                    <div>\n                      <label>No student is in this class and test</label>\n                    </div>\n                )}\n                </div>\n                {that.state.showPopUp ? (\n                    <ManageTestPopup\n                        testList={that.state.testList}\n                        selectedTest={that.state.selectedTest}\n                        popupHeaderText={that.state.popupHeaderText}\n                        testDetailsList={that.state.testDetailsList}\n                        sid={that.state.sid}\n                        popupBtnText={that.state.popupBtnText}\n                        updateTest={that.updateTest}\n                        addTest={that.addTest}\n                        closePopup={that.closeTestPopup}\n                    />\n                ) : null}\n\n                {that.state.showStudentGradePopup ? (\n                    <ManageStudentTestPopup\n                        testList={that.state.testList}\n                        selectedTest={that.state.selectedTest}\n                        popupHeaderText={that.state.popupHeaderText}\n                        studentData={that.state.studentData}\n                        popupBtnText={that.state.popupBtnText}\n                        studentMarkData={that.state.studentMarkData}\n                        //        addUser={that.addUser}\n                        updateInfo={that.updateInfo}\n                        closePopup={that.closeStudentGradePopup}\n                    />\n                ) : null}\n              </div>\n            </div>\n          </div>\n        </div>\n    );\n  }\n\n  getIndex(arr, testVal) {\n    return arr.findIndex((obj) => obj.value === testVal);\n  }\n\n  gotoBack() {\n    this.props.history.push({\n      pathname: redirectloginpath,\n      state: {token: this.state.token, uid: this.state.uid, t_firstn:this.state.t_firstn,\n        t_lastn:this.state.t_lastn},\n    });\n  }\n\n  onTestChange(data) {\n    var that = this;\n    this.setState({selectedTest: data.value, isAvgMarks: false}, () => {\n      that.loadStudentList();\n    });\n  }\n\n  loadFillData() {\n    if (this.state.studentList.length) {\n      return this.state.studentList.map((data, idx) => {\n        return (\n            <tr key={data.username + idx}>\n              <td>{data.name}</td>\n              <td>{ this.state.isAvgMarks ? data.avgGrade : data.marks}</td>\n              {this.state.isAvgMarks ? \"\" : <td>\n                {<button className=\"btn p-0\"\n                         onClick={() => this.openStudentTestGradeUpdatePopup(data)}>\n                         <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" class=\"bi bi-pencil-square\" viewBox=\"0 0 16 16\">\n                          <path d=\"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"></path>\n                          <path fill-rule=\"evenodd\" d=\"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z\"></path>\n                        </svg>  \n                </button>}\n              </td>}\n            </tr>\n        );\n      });\n    }\n  }\n\n  getAllTests() {\n    var tempList = [];\n    var that = this;\n\n    that.state.testDetailsList.forEach((info) => {\n      var obj = {value: info.tid, label: info.testname};\n      tempList.push(obj);\n    });\n\n    that.setState({testList: tempList}, () => {\n    });\n  }\n\n  addTest(data) {\n    var that = this;\n    console.log(that.state.token);\n\n    createNewTest(data, \"Token \" + that.state.token).then((data) => {\n      if (data.status === \"SUCCESS\") {\n        that.toggleNewTestPopup();\n        that.setState({testList: []}, () => {\n          getTestDetails(that.state.sid, \"Token \" + that.props.token).then(\n              (response) => {\n                that.setState({testDetailsList: response.data}, () => {\n                  that.getAllTests();\n                });\n              }\n          );\n        });\n      } else {\n        // alert(\"Error!!\");\n      }\n    });\n\n  }\n\n  updateTest(data) {\n    console.log(data);\n    var that = this;\n    //console.log(data)\n    updateATest(data, \"Token \" + that.state.token).then((response) => {\n      if (response.status === \"SUCCESS\") {\n        that.toggleNewTestPopup();\n        that.setState({testList: []}, () => {\n          getTestDetails(that.state.sid, \"Token \" + that.props.token).then(\n              (response) => {\n                that.setState({testDetailsList: response.data}, () => {\n                  that.getAllTests();\n                });\n              }\n          );\n        });\n      } else {\n        alert(\"Error!!\");\n      }\n    });\n  }\n\n  deleteInfo(data) {\n    var that = this;\n    console.log(data);\n    if (this.state.selectedTest) {\n      if (!window.confirm(\"Do you really want to delete the class?\")) return;\n      deleteATest(data, \"Token \" + that.state.token).then((data) => {\n        alert(data.message);\n        if (data.status === \"SUCCESS\") {\n          that.setState({testList: []}, () => {\n            getTestDetails(that.state.sid, \"Token \" + that.props.token).then(\n                (response) => {\n                  that.setState({testDetailsList: response.data, selectedTest: null}, () => {\n                    that.getAllTests();\n                  });\n                }\n            );\n          });\n        } else {\n          alert(\"Error!!\");\n        }\n      });\n    } else {\n      alert(\"Please select a test to delete\")\n    }\n  }\n\n  updateInfo(data) {\n    var that = this;\n    var result = {\n      rid: data.resid,\n      sid: this.state.sid,\n      tid: this.state.selectedTest,\n      uid: data.uid,\n      grade: data.marks,\n    };\n    updateResult(result, that.state.token).then((response) => {\n      console.log(response);\n      if (response.status === \"SUCCESS\") {\n        that.toggleStudentGradePopup();\n        that.setState({}, () => {\n          that.loadStudentList();\n        });\n      } else {\n        alert(response.message);\n      }\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}