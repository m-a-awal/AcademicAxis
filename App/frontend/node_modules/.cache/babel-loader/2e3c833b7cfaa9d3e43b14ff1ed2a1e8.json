{"ast":null,"code":"var _jsxFileName = \"/Users/m.asyam/Desktop/AcademicAxis/App/frontend/src/view/admin/Component/UserTab.js\";\nimport React from 'react';\nimport Dropdown from \"react-dropdown\";\nimport { getAllUsers, createNewUser, updateAUser, checkDuplicateUsername, getUsersByRole, deleteAUser } from '../../../api/AdminAPI';\nimport Userpopup from \"./Userpopup\";\nimport './UserTab.css';\nimport '../../../App.css';\nimport 'react-dropdown/style.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst options = [{\n  value: 'ALL',\n  label: 'All Users'\n}, {\n  value: 'Admin',\n  label: 'Admin'\n}, {\n  value: 'Teacher',\n  label: 'Teacher'\n}, {\n  value: 'Pupil',\n  label: 'Pupil'\n}];\nexport default class UserTab extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      list: [],\n      showPopup: false,\n      selectedRole: '',\n      popupHeaderText: '',\n      popupBtnText: '',\n      userinfo: {\n        fname: '',\n        lname: '',\n        username: '',\n        uid: ''\n      },\n      token: \"token \" + this.props.token,\n      uid: this.props.uid\n    };\n    this.loadFillData = this.loadFillData.bind(this);\n    this.getAllUser = this.getAllUser.bind(this);\n    this.openNewUserPopup = this.openNewUserPopup.bind(this);\n    this.onRoleSelect = this.onRoleSelect.bind(this);\n    this.openUpdatePopup = this.openUpdatePopup.bind(this);\n    this.deleteInfo = this.deleteInfo.bind(this);\n    this.togglePopup = this.togglePopup.bind(this); /// Popup functions\n\n    this.addUser = this.addUser.bind(this);\n    this.updateInfo = this.updateInfo.bind(this);\n    this.closePopup = this.closePopup.bind(this);\n  }\n\n  componentDidMount() {\n    var token = this.props.token;\n    this.getAllUser(\"tokeon \" + token);\n  }\n\n  render() {\n    var that = this;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        style: {\n          color: '#8c8c8c',\n          textAlign: 'left',\n          margin: '10px 0 10px 9.9%'\n        },\n        children: \"User Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"box-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"selection-area\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dropDownItem card row justify-content-center align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Select an user role\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 18\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n              options: options,\n              onChange: this.onRoleSelect,\n              value: options[0],\n              placeholderClassName: \"myPlaceholderClassName\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"SecondItem card row justify-content-center align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Add a new user\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 18\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-success\",\n              onClick: this.openNewUserPopup,\n              children: \"Add\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-box\",\n          children: that.state.list.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ag-theme-alpine data-table\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"table-scroll\",\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"table table-hover\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  className: \"thead-light\",\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\",\n                      children: \"Username\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 90,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\",\n                      children: \"First Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 91,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\",\n                      children: \"Last Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 92,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\",\n                      children: \"Role\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 93,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 94,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 95,\n                      columnNumber: 25\n                    }, this)]\n                  }, \"user_key1\", true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 89,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: this.loadFillData()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"No data\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 24\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), that.state.showPopup ? /*#__PURE__*/_jsxDEV(Userpopup, {\n          userinfo: that.state.userinfo,\n          selectedRole: that.state.selectedRole,\n          popupHeaderText: that.state.popupHeaderText,\n          popupBtnText: that.state.popupBtnText,\n          updateInfo: that.updateInfo,\n          addUser: that.addUser,\n          closePopup: that.closePopup\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this);\n  }\n\n  loadFillData() {\n    if (this.state.list.length) {\n      return this.state.list.map(data => {\n        return /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: data.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: data.firstname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: data.lastname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: data.role\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn p-0\",\n              onClick: () => this.openUpdatePopup(data),\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                width: \"20\",\n                height: \"20\",\n                fill: \"currentColor\",\n                class: \"bi bi-pencil-square\",\n                viewBox: \"0 0 16 16\",\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  \"fill-rule\": \"evenodd\",\n                  d: \"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 18\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn p-0\",\n              onClick: () => this.deleteInfo(data.uid),\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                width: \"20\",\n                height: \"20\",\n                fill: \"currentColor\",\n                class: \"bi bi-trash\",\n                viewBox: \"0 0 16 16\",\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  \"fill-rule\": \"evenodd\",\n                  d: \"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 18\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this)]\n        }, data.uid, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this);\n      });\n    }\n  }\n\n  getAllUser(token) {\n    getAllUsers(token).then(data => {\n      this.setState({\n        list: data.data\n      });\n    });\n  }\n\n  openNewUserPopup() {\n    if (this.state.selectedRole) {\n      this.setState({\n        popupHeaderText: \"Add A New\",\n        popupBtnText: \"Add\",\n        userinfo: {\n          fname: \"\",\n          lname: \"\",\n          uid: \"\",\n          username: \"\"\n        }\n      }, () => {\n        this.togglePopup();\n      });\n    } else alert(\"Please select a role.\");\n  }\n\n  onRoleSelect(e) {\n    var that = this;\n    this.setState({\n      selectedRole: e.value !== \"ALL\" ? e.value : \"\"\n    }, () => {\n      if (e.value === 'ALL') {\n        that.getAllUser(that.state.token);\n      } else {\n        getUsersByRole(e.value, that.state.token).then(data => {\n          // if(data.status !== \"FAILED\")\n          that.setState({\n            list: data.status !== \"FAILED\" ? data.data : []\n          });\n        });\n      }\n    });\n  }\n\n  openUpdatePopup(data) {\n    this.setState({\n      popupHeaderText: \"Update\",\n      popupBtnText: \"Update\",\n      userinfo: {\n        fname: data.firstname,\n        lname: data.lastname,\n        uid: data.uid,\n        username: data.username\n      },\n      selectedRole: data.role\n    }, () => {\n      this.togglePopup();\n    });\n  }\n\n  addUser(data) {\n    var that = this;\n    checkDuplicateUsername(data.username, that.state.token).then(response => {\n      if (!response.data.length) createNewUser(data, that.state.token).then(data => {\n        if (data.status === \"SUCCESS\") {\n          that.togglePopup();\n          that.setState({\n            list: [],\n            popupHeaderText: \"\",\n            popupBtnText: \"\",\n            userinfo: {\n              fname: \"\",\n              lname: \"\",\n              uid: \"\",\n              username: \"\"\n            } // selectedRole: \"\"\n\n          }, () => {\n            // that.getAllUser(that.state.token)\n            that.onRoleSelect({\n              value: that.state.selectedRole\n            });\n          });\n        } else {\n          alert(\"Error!!\");\n        }\n      });else alert(\"This username is already existed\");\n    });\n  }\n\n  updateInfo(data) {\n    var that = this;\n    updateAUser(data, that.state.token).then(response => {\n      if (response.status === \"SUCCESS\") {\n        that.togglePopup();\n        that.setState({\n          list: [],\n          popupHeaderText: \"\",\n          popupBtnText: \"\",\n          userinfo: {\n            fname: \"\",\n            lname: \"\",\n            uid: \"\",\n            username: \"\"\n          },\n          selectedRole: \"\"\n        }, () => {\n          that.getAllUser(that.state.token);\n        });\n      }\n    });\n  }\n\n  deleteInfo(uid) {\n    var that = this;\n\n    if (uid !== that.state.uid) {\n      if (!window.confirm(\"Do you really want to delete it?\")) return;\n      deleteAUser(uid, that.state.token).then(data => {\n        alert(data.message);\n        that.getAllUser(that.state.token);\n      });\n    } else {\n      alert(\"You can not delete yourself.\");\n    }\n  }\n\n  closePopup() {\n    this.setState({\n      popupHeaderText: \"\",\n      popupBtnText: \"\",\n      userinfo: {\n        fname: \"\",\n        lname: \"\",\n        uid: \"\",\n        username: \"\"\n      } //selectedRole: \"\"\n\n    }, () => {\n      this.togglePopup();\n    });\n  }\n\n  togglePopup() {\n    this.setState({\n      showPopup: !this.state.showPopup\n    });\n  }\n\n}","map":{"version":3,"sources":["/Users/m.asyam/Desktop/AcademicAxis/App/frontend/src/view/admin/Component/UserTab.js"],"names":["React","Dropdown","getAllUsers","createNewUser","updateAUser","checkDuplicateUsername","getUsersByRole","deleteAUser","Userpopup","options","value","label","UserTab","Component","constructor","props","state","list","showPopup","selectedRole","popupHeaderText","popupBtnText","userinfo","fname","lname","username","uid","token","loadFillData","bind","getAllUser","openNewUserPopup","onRoleSelect","openUpdatePopup","deleteInfo","togglePopup","addUser","updateInfo","closePopup","componentDidMount","render","that","color","textAlign","margin","length","map","data","firstname","lastname","role","then","setState","alert","e","status","response","window","confirm","message"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Dropdown from \"react-dropdown\";\nimport {\n  getAllUsers,\n  createNewUser,\n  updateAUser,\n  checkDuplicateUsername,\n  getUsersByRole,\n  deleteAUser\n} from '../../../api/AdminAPI'\nimport Userpopup from \"./Userpopup\";\n\nimport './UserTab.css'\nimport '../../../App.css';\nimport 'react-dropdown/style.css';\n\nconst options = [\n  { value: 'ALL', label: 'All Users' },\n  { value: 'Admin', label: 'Admin' },\n  { value: 'Teacher', label: 'Teacher' },\n  { value: 'Pupil', label: 'Pupil' }\n];\n\nexport default class UserTab extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      list: [],\n      showPopup: false,\n      selectedRole: '',\n      popupHeaderText: '',\n      popupBtnText: '',\n      userinfo: {\n        fname: '',\n        lname: '',\n        username: '',\n        uid: ''\n      },\n      token: \"token \" + this.props.token,\n      uid: this.props.uid\n    }\n    this.loadFillData = this.loadFillData.bind(this);\n    this.getAllUser = this.getAllUser.bind(this);\n    this.openNewUserPopup = this.openNewUserPopup.bind(this);\n    this.onRoleSelect = this.onRoleSelect.bind(this);\n    this.openUpdatePopup = this.openUpdatePopup.bind(this);\n    this.deleteInfo = this.deleteInfo.bind(this);\n    this.togglePopup = this.togglePopup.bind(this);\n\n    /// Popup functions\n    this.addUser = this.addUser.bind(this);\n    this.updateInfo = this.updateInfo.bind(this);\n    this.closePopup = this.closePopup.bind(this);\n  }\n\n  componentDidMount() {\n    var token = this.props.token;\n    this.getAllUser(\"tokeon \" + token);\n  }\n\n  render() {\n    var that = this;\n    return (\n      <div>\n        <h5 style={{ color: '#8c8c8c', textAlign: 'left', margin: '10px 0 10px 9.9%' }}>User Management</h5>\n        <div className=\"box-container\">\n          <div className='selection-area'>\n            <div className=\"dropDownItem card row justify-content-center align-items-center\">\n              <p><b>Select an user role</b></p>\n              <Dropdown\n                options={options}\n                onChange={this.onRoleSelect}\n                value={options[0]}\n                placeholderClassName='myPlaceholderClassName' />\n            </div>\n            <div className=\"SecondItem card row justify-content-center align-items-center\">\n              <p><b>Add a new user</b></p>\n              <button className=\"btn btn-success\" onClick={this.openNewUserPopup}>Add</button>\n            </div>\n          </div>\n          <div className=\"table-box\">\n            {that.state.list.length ?\n              <div className=\"ag-theme-alpine data-table\">\n                <div className=\"table-scroll\">\n                  <table className=\"table table-hover\">\n                    <thead className=\"thead-light\">\n                      <tr key={\"user_key1\"}>\n                        <th scope=\"col\">Username</th>\n                        <th scope=\"col\">First Name</th>\n                        <th scope=\"col\">Last Name</th>\n                        <th scope=\"col\">Role</th>\n                        <th scope=\"col\"></th>\n                        <th scope=\"col\"></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {this.loadFillData()}\n                    </tbody>\n                  </table>\n                </div>\n              </div> : <label>No data</label>}\n          </div>\n          {that.state.showPopup ?\n            <Userpopup userinfo={that.state.userinfo}\n              selectedRole={that.state.selectedRole}\n              popupHeaderText={that.state.popupHeaderText}\n              popupBtnText={that.state.popupBtnText}\n              updateInfo={that.updateInfo}\n              addUser={that.addUser}\n              closePopup={that.closePopup}\n            /> : null}\n        </div>\n      </div>\n    )\n  }\n\n  loadFillData() {\n    if (this.state.list.length) {\n\n      return this.state.list.map(data => {\n        return (\n          <tr key={data.uid}>\n            <th>{data.username}</th>\n            <td>{data.firstname}</td>\n            <td>{data.lastname}</td>\n            <td>{data.role}</td>\n            <td>{<button className=\"btn p-0\" onClick={() => this.openUpdatePopup(data)}>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" class=\"bi bi-pencil-square\" viewBox=\"0 0 16 16\">\n                <path d=\"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"></path>\n                <path fill-rule=\"evenodd\" d=\"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z\"></path>\n              </svg>\n            </button>}</td>\n            <td>{<button className=\"btn p-0\" onClick={() => this.deleteInfo(data.uid)}>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" class=\"bi bi-trash\" viewBox=\"0 0 16 16\">\n                <path d=\"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z\"></path>\n                <path fill-rule=\"evenodd\" d=\"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z\"></path>\n              </svg>\n            </button>}</td>\n          </tr>\n        )\n      })\n    }\n  }\n\n  getAllUser(token) {\n    getAllUsers(token).then(data => {\n      this.setState({ list: data.data })\n    })\n  }\n\n  openNewUserPopup() {\n    if (this.state.selectedRole) {\n      this.setState({\n        popupHeaderText: \"Add A New\",\n        popupBtnText: \"Add\",\n        userinfo: {\n          fname: \"\",\n          lname: \"\",\n          uid: \"\",\n          username: \"\"\n        }\n      },\n        () => {\n          this.togglePopup();\n        })\n    } else alert(\"Please select a role.\");\n\n  }\n\n  onRoleSelect(e) {\n    var that = this;\n    this.setState({ selectedRole: e.value !== \"ALL\" ? e.value : \"\" }, () => {\n      if (e.value === 'ALL') {\n        that.getAllUser(that.state.token);\n      } else {\n\n        getUsersByRole(e.value, that.state.token).then(data => {\n          // if(data.status !== \"FAILED\")\n\n          that.setState({ list: data.status !== \"FAILED\" ? data.data : [] })\n        })\n      }\n    })\n  }\n\n\n  openUpdatePopup(data) {\n    this.setState({\n      popupHeaderText: \"Update\",\n      popupBtnText: \"Update\",\n      userinfo: {\n        fname: data.firstname,\n        lname: data.lastname,\n        uid: data.uid,\n        username: data.username\n      },\n      selectedRole: data.role\n    },\n      () => {\n        this.togglePopup();\n      })\n  }\n\n  addUser(data) {\n    var that = this;\n    checkDuplicateUsername(data.username, that.state.token).then(response => {\n      if (!response.data.length)\n        createNewUser(data, that.state.token).then(data => {\n          if (data.status === \"SUCCESS\") {\n            that.togglePopup();\n            that.setState({\n              list: [],\n              popupHeaderText: \"\",\n              popupBtnText: \"\",\n              userinfo: {\n                fname: \"\",\n                lname: \"\",\n                uid: \"\",\n                username: \"\"\n              },\n              // selectedRole: \"\"\n            }, () => {\n              // that.getAllUser(that.state.token)\n              that.onRoleSelect({ value: that.state.selectedRole })\n            })\n          } else {\n            alert(\"Error!!\")\n          }\n        })\n      else alert(\"This username is already existed\");\n    })\n\n  }\n\n  updateInfo(data) {\n    var that = this;\n    updateAUser(data, that.state.token).then(response => {\n      if (response.status === \"SUCCESS\") {\n        that.togglePopup();\n        that.setState({\n          list: [],\n          popupHeaderText: \"\",\n          popupBtnText: \"\",\n          userinfo: {\n            fname: \"\",\n            lname: \"\",\n            uid: \"\",\n            username: \"\"\n          },\n          selectedRole: \"\"\n        }, () => {\n          that.getAllUser(that.state.token)\n        })\n      }\n    })\n  }\n\n  deleteInfo(uid) {\n    var that = this;\n    if (uid !== that.state.uid) {\n      if (!window.confirm(\"Do you really want to delete it?\")) return;\n      deleteAUser(uid, that.state.token).then(data => {\n        alert(data.message);\n        that.getAllUser(that.state.token);\n      })\n    } else { alert(\"You can not delete yourself.\") }\n  }\n\n  closePopup() {\n    this.setState({\n      popupHeaderText: \"\",\n      popupBtnText: \"\",\n      userinfo: {\n        fname: \"\",\n        lname: \"\",\n        uid: \"\",\n        username: \"\"\n      },\n      //selectedRole: \"\"\n    },\n      () => {\n        this.togglePopup();\n      })\n  }\n\n  togglePopup() {\n    this.setState({ showPopup: !this.state.showPopup });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}