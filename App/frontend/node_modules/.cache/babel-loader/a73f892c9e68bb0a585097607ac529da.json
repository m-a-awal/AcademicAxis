{"ast":null,"code":"var _jsxFileName = \"/Users/m.asyam/Desktop/AcademicAxis/App/frontend/src/view/admin/Component/PupilTab.js\";\nimport React from 'react';\nimport Dropdown from \"react-dropdown\";\nimport { getAllClass, searchPupil, getPupilByClass, updateAssignedPupil, assignPupil } from \"../../../api/AdminAPI\";\nimport SearchField from 'react-search-field';\nimport './UserTab.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass PupilTab extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      classByList: false,\n      selectedClass: '',\n      classList: [],\n      pupilList: [],\n      selectedPupilList: [],\n      token: \"token \" + this.props.token,\n      checkedPupil: [],\n      isPupilExists: true,\n      searchBy: ''\n    };\n    this.oninputChange = this.oninputChange.bind(this);\n    this.loadAllClass = this.loadAllClass.bind(this);\n    this.assignStudent = this.assignStudent.bind(this);\n    this.loadFillData = this.loadFillData.bind(this);\n    this.handleCheckBox = this.handleCheckBox.bind(this);\n    this.goClassTab = this.goClassTab.bind(this);\n    this.viewStudentList = this.viewStudentList.bind(this);\n    this.onClassSelect = this.onClassSelect.bind(this);\n    this.setID = this.setID.bind(this);\n  }\n\n  componentDidMount() {\n    this.loadAllClass();\n  }\n\n  render() {\n    var that = this;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        style: {\n          color: '#8c8c8c',\n          textAlign: 'left',\n          margin: '10px 0 10px 9.9%'\n        },\n        children: \"Pupil Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"box-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"selection-area\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dropDownItem card row justify-content-center align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Search Pupil\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 47,\n                columnNumber: 18\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SearchField, {\n              placeholder: \"Search Pupil\",\n              onSearchClick: that.oninputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"SecondItem card row justify-content-center align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Select a class\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 51,\n                columnNumber: 18\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n              classname: \"style.dropDown\",\n              options: this.state.classList,\n              onChange: this.onClassSelect,\n              placeholder: \"Choose a class\",\n              placeholderClassName: \"myPlaceholderClassName\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"SecondItem card row justify-content-center align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Assign/DeAssign Pupil\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 59,\n                columnNumber: 18\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {},\n              className: \"btn btn-success \",\n              onClick: that.assignStudent,\n              children: \"Assign\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                marginTop: '20px',\n                backgroundColor: '#a291f2',\n                borderColor: '#a291f2'\n              },\n              className: \"btn btn-success \",\n              onClick: that.viewStudentList,\n              children: \"View List\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-box\",\n          children: [that.state.pupilList.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ag-theme-alpine data-table\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"table-scroll\",\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"table table-hover\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  className: \"thead-light\",\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [that.state.classByList ? null : /*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 71,\n                      columnNumber: 58\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\",\n                      children: \"Username\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 72,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\",\n                      children: \"First Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 73,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\",\n                      children: \"Last Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 74,\n                      columnNumber: 25\n                    }, this), that.state.classByList ? null : /*#__PURE__*/_jsxDEV(\"th\", {\n                      scope: \"col\",\n                      children: \"Assigned In\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 75,\n                      columnNumber: 58\n                    }, this)]\n                  }, \"user_key1\", true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 70,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: this.loadFillData()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 78,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this) : null, that.state.isPupilExists ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"There is no pupil information for this class\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 51\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 46\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this);\n  }\n\n  goClassTab() {\n    this.props.tabSelection(1);\n  }\n\n  onClassSelect(e) {\n    this.setState({\n      selectedClass: e.value // pupilList:[],\n      // isPupilExists:true\n\n    });\n  }\n\n  viewStudentList() {\n    var that = this;\n\n    if (that.state.selectedClass) {\n      getPupilByClass(that.state.selectedClass, that.state.token).then(response => {\n        that.setState({\n          pupilList: response.data,\n          classByList: true,\n          isPupilExists: response.data.length ? true : false\n        });\n      });\n    } else {\n      alert(\"Please select a class first\");\n    }\n  }\n\n  oninputChange(e) {\n    var that = this;\n    if (e.length) searchPupil(e, that.state.token).then(response => {\n      that.setState({\n        pupilList: response.data,\n        classByList: false,\n        isPupilExists: response.data.length ? true : false,\n        searchBy: e\n      }, () => {\n        that.loadFillData();\n      });\n    });else {\n      alert(\"Please provide something to search\");\n    }\n  }\n\n  loadAllClass() {\n    var tempList = [];\n    var that = this;\n    getAllClass(that.state.token).then(data => {\n      data.data.forEach(info => {\n        var obj = {\n          value: info.cid,\n          label: info.classname\n        };\n        tempList.push(obj);\n      });\n      this.setState({\n        classList: tempList\n      }, () => {// console.log(that.state.classList)\n      });\n    });\n  }\n\n  assignStudent() {\n    var that = this;\n\n    if (that.state.selectedClass && that.state.selectedPupilList.length) {\n      that.state.selectedPupilList.forEach(pupil => {\n        if (that.state.selectedPupilList.length === 1 && pupil.cid === that.state.selectedClass) {\n          alert('This student is already in the selected class');\n          return;\n        }\n\n        var dataObj = {\n          csid: that.setID(),\n          uid: pupil.uid,\n          cid: that.state.selectedClass\n        };\n        assignPupil(dataObj, that.state.token).then(response => {});\n      });\n      getPupilByClass(that.state.selectedClass, that.state.token).then(response => {\n        that.setState({\n          pupilList: response.data,\n          classByList: true,\n          isPupilExists: response.data.length ? true : false,\n          checkedPupil: [],\n          selectedPupilList: []\n        });\n      });\n    } else {\n      alert(\"Please select Class and one or more pupil to assign them\");\n    }\n  }\n\n  setID() {\n    return \"ASGN\" + Date.now();\n  }\n\n  loadFillData() {\n    var that = this;\n\n    if (this.state.pupilList.length) {\n      return this.state.pupilList.map(data => {\n        if (data.isAssigned === 'Y' || data.isAssigned === null) return /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [that.state.classByList ? null : /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              id: data.uid,\n              name: data.uid,\n              type: \"checkbox\",\n              onChange: e => this.handleCheckBox(e, data)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 22\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: data.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: data.firstname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: data.lastname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 15\n          }, this), that.state.classByList ? null : /*#__PURE__*/_jsxDEV(\"th\", {\n            children: data.classname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 48\n          }, this)]\n        }, data.uid, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }, this);\n      });\n    }\n  }\n\n  handleCheckBox(e, data) {\n    var that = this;\n    let resultArray = [];\n    let tempSelectedList = [];\n\n    if (e.target.checked) {\n      resultArray = that.state.checkedPupil.filter(checkedID => checkedID !== e.target.id);\n      tempSelectedList = that.state.selectedPupilList.filter(obj => obj.uid !== e.target.id);\n      resultArray.push(e.target.id);\n      tempSelectedList.push(data);\n    } else {\n      resultArray = that.state.checkedPupil.filter(checkedID => checkedID !== e.target.id);\n      tempSelectedList = that.state.selectedPupilList.filter(obj => obj.uid !== e.target.id);\n    }\n\n    that.setState({\n      checkedPupil: resultArray,\n      selectedPupilList: tempSelectedList\n    });\n  }\n\n}\n\nexport default PupilTab;","map":{"version":3,"sources":["/Users/m.asyam/Desktop/AcademicAxis/App/frontend/src/view/admin/Component/PupilTab.js"],"names":["React","Dropdown","getAllClass","searchPupil","getPupilByClass","updateAssignedPupil","assignPupil","SearchField","PupilTab","Component","constructor","props","state","classByList","selectedClass","classList","pupilList","selectedPupilList","token","checkedPupil","isPupilExists","searchBy","oninputChange","bind","loadAllClass","assignStudent","loadFillData","handleCheckBox","goClassTab","viewStudentList","onClassSelect","setID","componentDidMount","render","that","color","textAlign","margin","marginTop","backgroundColor","borderColor","length","tabSelection","e","setState","value","then","response","data","alert","tempList","forEach","info","obj","cid","label","classname","push","pupil","dataObj","csid","uid","Date","now","map","isAssigned","username","firstname","lastname","resultArray","tempSelectedList","target","checked","filter","checkedID","id"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Dropdown from \"react-dropdown\";\nimport { getAllClass, searchPupil, getPupilByClass, updateAssignedPupil, assignPupil } from \"../../../api/AdminAPI\";\nimport SearchField from 'react-search-field';\nimport './UserTab.css'\n\nclass PupilTab extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      classByList: false,\n      selectedClass: '',\n      classList: [],\n      pupilList: [],\n      selectedPupilList: [],\n      token: \"token \" + this.props.token,\n      checkedPupil: [],\n      isPupilExists: true,\n      searchBy: ''\n    }\n    this.oninputChange = this.oninputChange.bind(this);\n    this.loadAllClass = this.loadAllClass.bind(this);\n    this.assignStudent = this.assignStudent.bind(this);\n    this.loadFillData = this.loadFillData.bind(this);\n    this.handleCheckBox = this.handleCheckBox.bind(this);\n    this.goClassTab = this.goClassTab.bind(this);\n    this.viewStudentList = this.viewStudentList.bind(this);\n    this.onClassSelect = this.onClassSelect.bind(this);\n    this.setID = this.setID.bind(this);\n\n  }\n\n  componentDidMount() {\n    this.loadAllClass();\n  }\n\n  render() {\n    var that = this;\n    return (\n      <div>\n        <h5 style={{ color: '#8c8c8c', textAlign: 'left', margin: '10px 0 10px 9.9%' }}>Pupil Management</h5>\n        <div className=\"box-container\">\n          <div className=\"selection-area\">\n            <div className=\"dropDownItem card row justify-content-center align-items-center\">\n              <p><b>Search Pupil</b></p>\n              <SearchField placeholder='Search Pupil' onSearchClick={that.oninputChange} />\n            </div>\n            <div className=\"SecondItem card row justify-content-center align-items-center\">\n              <p><b>Select a class</b></p>\n              <Dropdown classname='style.dropDown'\n                options={this.state.classList}\n                onChange={this.onClassSelect}\n                placeholder=\"Choose a class\"\n                placeholderClassName='myPlaceholderClassName' />\n            </div>\n            <div className=\"SecondItem card row justify-content-center align-items-center\">\n              <p><b>Assign/DeAssign Pupil</b></p>\n              <button style={{ }} className=\"btn btn-success \" onClick={that.assignStudent}>Assign</button>\n              <button style={{ marginTop: '20px', backgroundColor:'#a291f2',borderColor:'#a291f2' }} className=\"btn btn-success \" onClick={that.viewStudentList}>View List</button>\n            </div>\n          </div>\n          <div className=\"table-box\">\n            {that.state.pupilList.length ?\n              <div className=\"ag-theme-alpine data-table\">\n                <div className=\"table-scroll\">\n                  <table className=\"table table-hover\">\n                    <thead className=\"thead-light\">\n                      <tr key={\"user_key1\"}>\n                        {that.state.classByList ? null : <th scope=\"col\"></th>}\n                        <th scope=\"col\">Username</th>\n                        <th scope=\"col\">First Name</th>\n                        <th scope=\"col\">Last Name</th>\n                        {that.state.classByList ? null : <th scope=\"col\">Assigned In</th>}\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {this.loadFillData()}\n                    </tbody>\n                  </table>\n                </div>\n              </div> : null}        \n          {that.state.isPupilExists ? null : <div><label>There is no pupil information for this class</label></div>}\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  goClassTab() {\n    this.props.tabSelection(1);\n  }\n\n  onClassSelect(e) {\n    this.setState({\n      selectedClass: e.value,\n      // pupilList:[],\n      // isPupilExists:true\n    })\n  }\n\n  viewStudentList() {\n    var that = this;\n    if (that.state.selectedClass) {\n      getPupilByClass(that.state.selectedClass, that.state.token).then(response => {\n        that.setState({\n          pupilList: response.data,\n          classByList: true,\n          isPupilExists: response.data.length ? true : false\n        });\n      })\n    } else {\n      alert(\"Please select a class first\")\n    }\n  }\n\n  oninputChange(e) {\n    var that = this;\n    if (e.length)\n      searchPupil(e, that.state.token).then((response) => {\n        that.setState({\n          pupilList: response.data,\n          classByList: false,\n          isPupilExists: response.data.length ? true : false,\n          searchBy: e\n        }, () => {\n          that.loadFillData();\n        })\n      })\n    else { alert(\"Please provide something to search\") }\n  }\n\n  loadAllClass() {\n    var tempList = [];\n    var that = this;\n    getAllClass(that.state.token).then((data) => {\n      data.data.forEach((info) => {\n        var obj = { value: info.cid, label: info.classname };\n        tempList.push(obj);\n      });\n      this.setState({ classList: tempList }, () => {\n        // console.log(that.state.classList)\n      });\n    });\n  }\n\n  assignStudent() {\n    var that = this;\n    if (that.state.selectedClass && that.state.selectedPupilList.length) {\n      that.state.selectedPupilList.forEach(pupil => {\n        if (that.state.selectedPupilList.length === 1 && pupil.cid === that.state.selectedClass) {\n          alert('This student is already in the selected class');\n          return;\n        }\n        var dataObj = {\n          csid: that.setID(),\n          uid: pupil.uid,\n          cid: that.state.selectedClass\n        }\n        assignPupil(dataObj, that.state.token).then(response => {\n\n        })\n      })\n\n      getPupilByClass(that.state.selectedClass, that.state.token).then(response => {\n        that.setState({\n          pupilList: response.data,\n          classByList: true,\n          isPupilExists: response.data.length ? true : false,\n          checkedPupil: [],\n          selectedPupilList: []\n        });\n      })\n\n    } else {\n      alert(\"Please select Class and one or more pupil to assign them\");\n    }\n  }\n\n  setID() {\n    return \"ASGN\" + Date.now()\n  }\n\n  loadFillData() {\n    var that = this;\n    if (this.state.pupilList.length) {\n      return this.state.pupilList.map(data => {\n        if (data.isAssigned === 'Y' || data.isAssigned === null)\n          return (\n            <tr key={data.uid}>\n              {that.state.classByList ? null :\n                <td>{<input id={data.uid} name={data.uid} type=\"checkbox\"\n                  onChange={(e) => this.handleCheckBox(e, data)} />}</td>}\n              <td>{data.username}</td>\n              <td>{data.firstname}</td>\n              <td>{data.lastname}</td>\n              {that.state.classByList ? null : <th>{data.classname}</th>}\n            </tr>\n          )\n      })\n    }\n  }\n\n  handleCheckBox(e, data) {\n    var that = this;\n\n    let resultArray = []\n    let tempSelectedList = []\n\n    if (e.target.checked) {\n      resultArray = that.state.checkedPupil.filter(checkedID => checkedID !== e.target.id)\n      tempSelectedList = that.state.selectedPupilList.filter(obj => obj.uid !== e.target.id)\n      resultArray.push(e.target.id)\n      tempSelectedList.push(data)\n    } else {\n      resultArray = that.state.checkedPupil.filter(checkedID => checkedID !== e.target.id)\n      tempSelectedList = that.state.selectedPupilList.filter(obj => obj.uid !== e.target.id)\n    }\n    that.setState({\n      checkedPupil: resultArray,\n      selectedPupilList: tempSelectedList\n    })\n  }\n}\n\n\nexport default PupilTab;\n"]},"metadata":{},"sourceType":"module"}